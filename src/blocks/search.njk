<div x-data="citySearch()" class="relative w-full flex flex-col gap-[10px] xl:col-span-2 "  @click.away="open = false" >

	<div class=" relative ">
		<input class="w-full bg-white rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300 h-16 placeholder:text-[#495057] " x-model="query" x-on:input="filterCities" x-on:focus="showAllCities" x-on:keydown.arrow-down.prevent="highlightNext" x-on:keydown.arrow-up.prevent="highlightPrev" x-on:keydown.enter.prevent="selectCity" id="city-search" type="text" placeholder="Место отправки" autocomplete="off" role="combobox" aria-autocomplete="list" aria-controls="city-listbox" :aria-expanded="open.toString()" aria-haspopup="listbox" aria-activedescendant="activeDescendant" />
		<div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none" aria-hidden="true">
			<!-- Лупа (можно заменить на другую) -->
			<svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-width="2" d="M21 21l-4.35-4.35m1.61-5.16a7 7 0 11-14 0 7 7 0 0114 0z" />
			</svg>
		</div>
	</div>

	{# <div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 h-0" x-transition:enter-end="opacity-100 h-full" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 " x-transition:leave-end="opacity-0 h-0" class="overflow-hidden  bg-white border border-gray-200 rounded-md shadow-inner">
		<ul class="overflow-auto max-h-[320px] " id="city-listbox" role="listbox">
			<template x-for="(city, index) in filtered" :key="index">
				<li @click="selectCityFromList(city)" @mouseenter="highlight = index" :id="'city-option-' + index" role="option" :aria-selected="highlight === index" :class="highlight === index ? 'bg-blue-100 text-blue-800' : 'text-gray-900'" class="cursor-pointer px-4 py-2 hover:bg-blue-50">
					<span x-text="city"></span>
				</li>
			</template>

			<li x-show="filtered.length === 0" class="px-4 py-2 text-gray-500">Нет совпадений</li>
		</ul>
	</div> #}

	<div x-show="open" x-collapse.duration.100ms class="bg-white w-full rounded-xl ">
		<div class="">Выберите город отправки:</div>
		<ul class="overflow-auto max-h-[320px] " id="city-listbox" role="listbox">
			<template x-for="(city, index) in filtered" :key="index">
				<li @click="selectCityFromList(city)"  :id="'city-option-' + index" role="option" :aria-selected="highlight === index"  class="cursor-pointer px-4 py-2 hover:bg-blue">
					<span x-text="city"></span>
				</li>
			</template>

			<li x-show="filtered.length === 0" class="px-4 py-2 text-gray-500">Нет совпадений</li>
		</ul>
	</div>
</div>

